@model HaGe.Application.Models.Base.BaseModel

<div class="app-main flex-column flex-row-fluid" id="kt_app_main">
<!--begin::Content wrapper-->
<div class="d-flex flex-column flex-column-fluid">
<!--begin::Content-->
<div id="kt_app_content" class="app-content flex-column-fluid">
<!--begin::Content container-->
<div id="kt_app_content_container" class="app-container">
<!--begin::Navbar-->
<div class="card mb-6">
<div class="card-body pt-9 pb-0">
<!--begin::Details-->
<div class="d-flex flex-wrap flex-sm-nowrap">
<!--begin: Pic-->
<div class="me-7 mb-4">
    <div class="symbol symbol-100px symbol-lg-160px symbol-fixed position-relative">
        <img src="@Model.User.ProfilePhoto" alt="image">
        <div class="position-absolute translate-middle bottom-0 start-100 mb-6 bg-success rounded-circle border border-4 border-body h-20px w-20px"></div>
    </div>
</div>
<!--end::Pic-->
<!--begin::Info-->
<div class="flex-grow-1">
<!--begin::Title-->
<div class="d-flex justify-content-between align-items-start flex-wrap mb-2">
    <!--begin::User-->
    <div class="d-flex flex-column">
        <!--begin::Name-->
        <div class="d-flex align-items-center mb-2">
            <a href="#" class="text-gray-900 text-hover-primary fs-2 fw-bold me-1">@Model.User.Name</a>
        </div>
        <!--end::Name-->
        <!--begin::Info-->
        <div class="d-flex flex-wrap fw-semibold fs-6 mb-4 pe-2">
            @if(!string.IsNullOrEmpty(Model.Country)){
            <a href="#" class="d-flex align-items-center text-gray-400 text-hover-primary me-5 mb-2">
                <i class="ki-duotone ki-geolocation fs-4 me-1">
                    <span class="path1"></span>
                    <span class="path2"></span>
                </i>@Model.Country
            </a>
            }
            @if(!string.IsNullOrEmpty(Model.User.Email)){
            <a href="#" class="d-flex align-items-center text-gray-400 text-hover-primary mb-2">
                <i class="ki-duotone ki-sms fs-4 me-1">
                    <span class="path1"></span>
                    <span class="path2"></span>
                </i>@Model.User.Email
            </a>
            }
        </div>
        <!--end::Info-->
    </div>
    <!--end::User-->
</div>
<!--end::Title-->
<!--begin::Stats-->
<div class="d-flex flex-wrap flex-stack">
    <!--begin::Wrapper-->
    <div class="d-flex flex-column flex-grow-1 pe-8">
        <!--begin::Stats-->
        <div class="d-flex flex-wrap">
            <!--begin::Stat-->
            <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-6 mb-3">
                <!--begin::Number-->
                <div class="d-flex align-items-center">
                    <i class="ki-duotone ki-arrow-up fs-3 text-success me-2">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                    <div class="fs-2 fw-bold counted" data-kt-countup="true" data-kt-countup-value="2" data-kt-countup-prefix="$" data-kt-initialized="1">2</div>
                </div>
                <!--end::Number-->
                <!--begin::Label-->
                <div class="fw-semibold fs-6 text-gray-400">NUmber of tries</div>
                <!--end::Label-->
            </div>
            <!--end::Stat-->
            <!--begin::Stat-->
            <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-6 mb-3">
                <!--begin::Number-->
                <div class="d-flex align-items-center">
                    <i class="ki-duotone ki-arrow-down fs-3 text-danger me-2">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                    <div class="fs-2 fw-bold counted" data-kt-countup="true" data-kt-countup-value="5" data-kt-initialized="1">5</div>
                </div>
                <!--end::Number-->
                <!--begin::Label-->
                <div class="fw-semibold fs-6 text-gray-400">Total stars</div>
                <!--end::Label-->
            </div>
            <!--end::Stat-->
            <!--begin::Stat-->
            <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-6 mb-3">
                <!--begin::Number-->
                <div class="d-flex align-items-center">
                    <i class="ki-duotone ki-arrow-up fs-3 text-success me-2">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                    <div class="fs-2 fw-bold counted" data-kt-countup="true" data-kt-countup-value="85" data-kt-countup-prefix="%" data-kt-initialized="1">%85</div>
                </div>
                <!--end::Number-->
                <!--begin::Label-->
                <div class="fw-semibold fs-6 text-gray-400">Highest score</div>
                <!--end::Label-->
            </div>
            <!--end::Stat-->
        </div>
        <!--end::Stats-->
    </div>
    <!--end::Wrapper-->
</div>
<!--end::Stats-->
</div>
<!--end::Info-->
</div>
<!--end::Details-->
<!--begin::Navs-->
<ul class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 fw-bold">
    <!--begin::Nav item-->
    <li class="nav-item mt-2">
        <a class="nav-link text-active-primary ms-0 me-10 py-5 active">Overview</a>
    </li>
</ul>
<!--begin::Navs-->
</div>
</div>
<!--end::Navbar-->
@foreach(var item in Model.Levels.Select(x => x.Key)){

    var locked = new List<string>() {
        "Unlocked",
        "Locked"
    };
    var mainStatus = item.IsActive.HasValue && item.IsActive.Value ? locked[0] : locked[1];
<!--begin::Toolbar-->
<div class="d-flex flex-wrap flex-stack">
    <!--begin::Heading-->
    <h3 class="fw-bold my-2">
        @item.Name
        <span class="fs-6 text-gray-400 fw-semibold ms-1">@mainStatus</span>
    </h3>
    <!--end::Heading-->
</div>
<!--end::Toolbar-->
<!--begin::Row-->
<div class="row g-6 g-xl-9">
    @{
        var statuses = new List<string>() {
            "Available",
            "Locked"
        };
        var statusesColor = new List<string>() {
            "badge-light-success",
            "badge-light"
        };
    var levels = Model.Levels.FirstOrDefault(x => x.Key == item).Value.OrderBy(x => x.Order);
    foreach(var level in levels){
        var status = statuses.IndexOf(level.Name) + 1;
        var statusColor = statusesColor.IndexOf(level.Name) + 1;

        var statusStr = "";

        if (level.IsActive.HasValue && level.IsActive.Value) {
            statusStr = statuses[0];
        } else {
            statusStr = statuses[1];
        }
        <!--begin::Col-->
        @if (level.Name == "Quiz") {
            <div class="col-md-3 col-xl-2 mb-6 d-flex" style="align-content: flex-start;justify-content: center;">
                <div style="background:black; height:100%; width:1px"></div>
            </div>
        }
<div class="col-md-3 col-xl-2 mb-6">
    <!--begin::Card-->
    @{
        var style = statusStr == statuses[1] ? "pointer-events: none; filter: saturate(0); opacity: 0.7;" : "";
    }
    <a asp-controller="Dashboards" asp-action="Attempt" asp-route-id="@level.Id" class="card border-hover-primary" style="@style">
        <!--begin::Card header-->
        <div class="card-header border-0 pt-9">
            <!--begin::Card Title-->
            <div class="card-title m-0">
                <!--begin::Avatar-->
                <div class="symbol symbol-50px w-50px bg-light">
                    <img src="@level.Image" alt="image" class="p-3">
                </div>
                <!--end::Avatar-->
            </div>
            <!--end::Car Title-->
            <!--begin::Card toolbar-->
            <div class="card-toolbar">
                <span class="badge @statusesColor[statusColor] fw-bold me-auto px-4 py-3">@statusStr</span>
            </div>
            <!--end::Card toolbar-->
        </div>
        <!--end:: Card header-->
        <!--begin:: Card body-->
        <div class="card-body p-9">
            <!--begin::Name-->
            <div class="fs-3 fw-bold text-dark">@level.Name</div>
            <!--end::Name-->
            <!--begin::Info-->
            <div class="d-flex flex-wrap mb-5">
                <!--begin::Due-->
                <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-7 mb-3">
                    <div class="fs-6 text-gray-800 fw-bold">@level.NumberOfTries</div>
                    <div class="fw-semibold text-gray-400">Number Of tries</div>
                </div>
                <!--end::Due-->
                <!--begin::Budget-->
                <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 mb-3">
                    <div class="fs-6 text-gray-800 fw-bold">85%</div>
                    <div class="fw-semibold text-gray-400">Highest score</div>
                </div>
                <!--end::Budget-->
            </div>
            <!--end::Info-->
            <!--begin::Progress-->
            <div class="h-4px w-100 bg-light mb-5" data-bs-toggle="tooltip" aria-label="This project 50% completed" data-bs-original-title="This project 50% completed" data-kt-initialized="1">
                <div class="bg-primary rounded h-4px" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <!--end::Progress-->
            <!--begin::Users-->
            @* <div class="symbol-group symbol-hover"> *@
            @*     <!--begin::User--> *@
            @*     <div class="symbol symbol-35px symbol-circle" data-bs-toggle="tooltip" data-bs-original-title="Susan Redwood" data-kt-initialized="1"> *@
            @*         <span class="symbol-label bg-primary text-inverse-primary fw-bold">S</span> *@
            @*     </div> *@
            @*     <!--begin::User--> *@
            @* </div> *@
            @* <!--end::Users--> *@
        </div>
        <!--end:: Card body-->
    </a>
    <!--end::Card-->
</div>
    <!--end::Col-->
}
}
</div>
}
</div>
<!--end::Content container-->
</div>
<!--end::Content-->
</div>
<!--end::Content wrapper-->
</div>